## Kanishka's note on what test cases to add

## Checked the ISDA, find out the following:
## a. maturity date ï¼ˆendDate) does not need to be a weekday. It remains unfixed, and has to be roll date.
## b. coupondate must be a weekday; if the roll date is a weekend day, coupon date has to be adjusted to business day.
## c. Accrual Start Date must be a weekday. if the rolldate before trade date is a weekend day, accrual start date
##    must be adjusted to next business day.
## d. Accrual End Date (not end date or maturity date, which must be fixed) does not have to be a weekday:
##    for example, if the second coupon payment date is Mon 6/22/2009 (because 6/20/2009 is a weekend day), then
##    the Accrual end date is 6/21/2009, a Sunday.
## e. So according to ISDA date convention pdf, start date and benchmark start date is the same as accrual begin date,
##    this means that startDate and benchmarkDate must be weekdays.
## f. Also, there exists a confusion for valueDate: if you check out ISDA date convention pdf, you will find that
##    if you are calculating "cash settlement from spread" or "spread from upfront", then valueDate = Trade date + 3, 
##    which also means that valueDate can also be a weekend.
##    else if you are "building a yield curve", then valueDate = Trade Date + 2 weekdays (Non-JPY) or Trade Date + 2 business
##    days (JPY), which also means that valueDate can be a weekend.
##    But right now, in our CDS package, I "think" we are treating valueDate = Trade Date + 2 business days/weekdays everywhere
##    And I "think" we are coercing valueDate to be a business day. 



## Rec Risk 01 was problematic. More test cases needed there (ask for BB screenshots from Dave).
## (RecRisk shouldn't be more problematic, because its code is almost identical to IR.DV01 and spread.DV01,
## maybe it's just that the effect of change in RecRisk is bigger than other variable, so it seems that 
## the code of RecRisk is more problematic)

## PV.01 test case if George provides the true values to test against.



## Preferably do all these before 2012 because I haven't found inaccuracies for cases in the
## last two years 

## DONE: 1. when the trade date is right after a roll date. Eg June 23 (roll date is June 20). 
## (added to test.get.date)

## DONE: 2. when the maturity date lands on a weekend. Right now, if you don't provide a maturity date,
## and you provide just the tenor, get.date returns a maturity date or enddate which has to 
## be a weekday. (added to test.get.date.R)

## DONE: 3. when the trade date is on a holiday that is a holiday only for that specific region for 
## USD, JPY & EUR (like July 4 is only a holiday in US). (added to test.get.date)

## DONE: 4. when the basedate happens to land on a holiday, for JPY, USD & EUR. Basedate is T+2 weekdays (for non-JPY) 
## and T+2 business days (for JPY). (added test to test.JPY.condition)

## DONE: 5. When TDate is one day before the maturity date (added to test.get.date)

## DONE: 6. Where TDate is Monday (added to test.get.date; something very unexpected happens)

## DONE: 7. Where Spread is very high. Like if coupon =  100, spread = 1100 (this is already in test.CDS, 
## where the spread is even higher; the result is compared with Bloomberg)







